<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker de Apuestas Deportivas</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Controla tus apuestas deportivas y mejora tus resultados">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Apuestas">
    <link rel="manifest" href="manifest.json">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%232563eb'/%3E%3Cpath d='M20 30h-5c-2.76 0-5-2.24-5-5s2.24-5 5-5h5M80 30h5c2.76 0 5-2.24 5-5s-2.24-5-5-5h-5M15 85h70M35 55v7c0 1.66-1.42 2.96-2.93 3.66C29.56 66.5 28 69.24 28 72M65 55v7c0 1.66 1.42 2.96 2.93 3.66C70.44 66.5 72 69.24 72 72M80 20H20v21c0 9.94 8.06 18 18 18h24c9.94 0 18-8.06 18-18V20z' fill='none' stroke='%23fbbf24' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Disable Tailwind warning
        tailwind.config = {
            theme: {
                extend: {}
            }
        }
        
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registrado'))
                    .catch(err => console.log('Error al registrar Service Worker:', err));
            });
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Icons
        const PlusCircle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="16"></line>
                <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
        );

        const TrendingUp = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        const TrendingDown = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
                <polyline points="17 18 23 18 23 12"></polyline>
            </svg>
        );

        const Calendar = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const DollarSign = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
        );

        const Percent = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="19" y1="5" x2="5" y2="19"></line>
                <circle cx="6.5" cy="6.5" r="2.5"></circle>
                <circle cx="17.5" cy="17.5" r="2.5"></circle>
            </svg>
        );

        const Trophy = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );

        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const BettingTracker = () => {
            const [bets, setBets] = useState([]);
            const [activeTab, setActiveTab] = useState('nueva');
            const [formData, setFormData] = useState({
                date: new Date().toISOString().split('T')[0],
                sport: 'Fútbol',
                event: '',
                betType: 'Ganador',
                stake: '',
                odds: '',
                result: 'Pendiente',
                profit: 0
            });

            useEffect(() => {
                const saved = localStorage.getItem('bets');
                if (saved) setBets(JSON.parse(saved));
            }, []);

            useEffect(() => {
                if (bets.length > 0) localStorage.setItem('bets', JSON.stringify(bets));
            }, [bets]);

            const handleSubmit = (e) => {
                e.preventDefault();
                const newBet = {
                    id: Date.now().toString(),
                    ...formData,
                    stake: parseFloat(formData.stake),
                    odds: parseFloat(formData.odds),
                    profit: 0
                };
                setBets([...bets, newBet]);
                setFormData({
                    date: new Date().toISOString().split('T')[0],
                    sport: 'Fútbol',
                    event: '',
                    betType: 'Ganador',
                    stake: '',
                    odds: '',
                    result: 'Pendiente',
                    profit: 0
                });
                setActiveTab('historial');
            };

            const updateResult = (id, result) => {
                setBets(bets.map(bet => {
                    if (bet.id === id) {
                        const profit = result === 'Ganada' ? bet.stake * (bet.odds - 1) : result === 'Perdida' ? -bet.stake : 0;
                        return { ...bet, result, profit };
                    }
                    return bet;
                }));
            };

            const deleteBet = (id) => setBets(bets.filter(b => b.id !== id));

            const stats = {
                total: bets.length,
                won: bets.filter(b => b.result === 'Ganada').length,
                lost: bets.filter(b => b.result === 'Perdida').length,
                pending: bets.filter(b => b.result === 'Pendiente').length,
                staked: bets.reduce((s, b) => s + b.stake, 0),
                profit: bets.reduce((s, b) => s + b.profit, 0),
                winRate: bets.filter(b => b.result !== 'Pendiente').length > 0 
                    ? (bets.filter(b => b.result === 'Ganada').length / bets.filter(b => b.result !== 'Pendiente').length) * 100 
                    : 0,
                roi: bets.reduce((s, b) => s + b.stake, 0) > 0 
                    ? (bets.reduce((s, b) => s + b.profit, 0) / bets.reduce((s, b) => s + b.stake, 0)) * 100 
                    : 0
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-8">
                    <div className="max-w-6xl mx-auto">
                        <div className="text-center mb-8">
                            <h1 className="text-4xl md:text-5xl font-bold text-white mb-2 flex items-center justify-center gap-3">
                                <Trophy size={40} className="text-yellow-400" />
                                Tracker de Apuestas Deportivas
                            </h1>
                            <p className="text-slate-400">Controla tus apuestas y mejora tus resultados</p>
                        </div>

                        <div className="flex gap-2 mb-6 bg-slate-800 p-2 rounded-lg border border-slate-700">
                            {[
                                { id: 'nueva', label: 'Nueva Apuesta', icon: PlusCircle },
                                { id: 'historial', label: 'Historial', icon: Calendar },
                                { id: 'estadisticas', label: 'Estadísticas', icon: TrendingUp }
                            ].map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(tab.id)}
                                    className={`flex-1 py-3 px-4 rounded-lg font-semibold transition-all ${
                                        activeTab === tab.id
                                            ? 'bg-blue-600 text-white shadow-lg'
                                            : 'text-slate-400 hover:text-white hover:bg-slate-700'
                                    }`}
                                >
                                    <tab.icon className="inline-block mr-2" size={20} />
                                    {tab.label}
                                </button>
                            ))}
                        </div>

                        {activeTab === 'nueva' && (
                            <div className="bg-slate-800 rounded-lg p-6 border border-slate-700">
                                <h2 className="text-2xl font-bold text-white mb-6">Registrar Nueva Apuesta</h2>
                                <form onSubmit={handleSubmit} className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-slate-300 text-sm font-medium mb-2">Fecha</label>
                                        <input type="date" value={formData.date} onChange={(e) => setFormData({...formData, date: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white" required />
                                    </div>
                                    <div>
                                        <label className="block text-slate-300 text-sm font-medium mb-2">Deporte</label>
                                        <select value={formData.sport} onChange={(e) => setFormData({...formData, sport: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white">
                                            {['Fútbol', 'Baloncesto', 'Tenis', 'Béisbol', 'Fútbol Americano', 'Hockey', 'Otro'].map(s => <option key={s}>{s}</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-slate-300 text-sm font-medium mb-2">Evento</label>
                                        <input type="text" value={formData.event} onChange={(e) => setFormData({...formData, event: e.target.value})} placeholder="Ej: Real Madrid vs Barcelona" className="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500" required />
                                    </div>
                                    <div>
                                        <label className="block text-slate-300 text-sm font-medium mb-2">Tipo de Apuesta</label>
                                        <select value={formData.betType} onChange={(e) => setFormData({...formData, betType: e.target.value})} className="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white">
                                            {['Ganador', 'Over/Under', 'Handicap', 'Ambos equipos marcan', 'Resultado exacto', 'Otro'].map(t => <option key={t}>{t}</option>)}
                                        </select>
                                    </div>
                                    <div>
                                        <label className="block text-slate-300 text-sm font-medium mb-2">Monto Apostado (Unidades)</label>
                                        <input type="number" step="0.01" value={formData.stake} onChange={(e) => setFormData({...formData, stake: e.target.value})} placeholder="1.00" className="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500" required />
                                    </div>
                                    <div>
                                        <label className="block text-slate-300 text-sm font-medium mb-2">Cuota</label>
                                        <input type="number" step="0.01" value={formData.odds} onChange={(e) => setFormData({...formData, odds: e.target.value})} placeholder="1.50" className="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2 text-white placeholder-slate-500" required />
                                    </div>
                                    <div className="md:col-span-2">
                                        <button type="submit" className="w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white py-3 rounded-lg font-semibold transition-all shadow-lg">Guardar Apuesta</button>
                                    </div>
                                </form>
                            </div>
                        )}

                        {activeTab === 'historial' && (
                            <div className="bg-slate-800 rounded-lg border border-slate-700 overflow-hidden">
                                <div className="p-4 bg-slate-900 border-b border-slate-700">
                                    <h2 className="text-xl font-bold text-white">Historial de Apuestas</h2>
                                    <p className="text-sm text-slate-400 mt-1">Total: {bets.length} apuestas</p>
                                </div>
                                <div className="overflow-x-auto">
                                    {bets.length === 0 ? (
                                        <div className="p-12 text-center text-slate-400">
                                            <Trophy size={48} className="mx-auto mb-4 opacity-30" />
                                            <p className="text-lg">No hay apuestas registradas</p>
                                        </div>
                                    ) : (
                                        <table className="w-full">
                                            <thead className="bg-slate-900/50 text-slate-300 text-sm">
                                                <tr>
                                                    <th className="px-4 py-3 text-left">Fecha</th>
                                                    <th className="px-4 py-3 text-left">Deporte</th>
                                                    <th className="px-4 py-3 text-left">Evento</th>
                                                    <th className="px-4 py-3 text-left">Tipo</th>
                                                    <th className="px-4 py-3 text-right">Monto</th>
                                                    <th className="px-4 py-3 text-right">Cuota</th>
                                                    <th className="px-4 py-3 text-center">Estado</th>
                                                    <th className="px-4 py-3 text-right">Ganancia</th>
                                                    <th className="px-4 py-3 text-center">×</th>
                                                </tr>
                                            </thead>
                                            <tbody className="text-white">
                                                {[...bets].reverse().map(bet => (
                                                    <tr key={bet.id} className="border-t border-slate-700 hover:bg-slate-700/30">
                                                        <td className="px-4 py-3 text-sm">{bet.date}</td>
                                                        <td className="px-4 py-3 text-sm">{bet.sport}</td>
                                                        <td className="px-4 py-3 text-sm">{bet.event}</td>
                                                        <td className="px-4 py-3 text-sm text-slate-400">{bet.betType}</td>
                                                        <td className="px-4 py-3 text-sm text-right">{bet.stake.toFixed(2)}U</td>
                                                        <td className="px-4 py-3 text-sm text-right font-semibold">{bet.odds.toFixed(2)}</td>
                                                        <td className="px-4 py-3 text-center">
                                                            <select value={bet.result} onChange={(e) => updateResult(bet.id, e.target.value)} className={`text-sm px-3 py-1 rounded-full font-semibold ${bet.result === 'Ganada' ? 'bg-green-500/20 text-green-400 border border-green-500/30' : bet.result === 'Perdida' ? 'bg-red-500/20 text-red-400 border border-red-500/30' : 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30'}`}>
                                                                <option value="Pendiente">Pendiente</option>
                                                                <option value="Ganada">Ganada</option>
                                                                <option value="Perdida">Perdida</option>
                                                            </select>
                                                        </td>
                                                        <td className={`px-4 py-3 text-sm text-right font-bold ${bet.profit > 0 ? 'text-green-400' : bet.profit < 0 ? 'text-red-400' : 'text-slate-400'}`}>
                                                            {bet.profit > 0 ? '+' : ''}{bet.profit.toFixed(2)}U
                                                        </td>
                                                        <td className="px-4 py-3 text-center">
                                                            <button onClick={() => deleteBet(bet.id)} className="text-red-400 hover:text-red-300"><X size={18} /></button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'estadisticas' && (
                            <div>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                                    <div className="bg-slate-800 rounded-lg p-6 border border-slate-700">
                                        <div className="flex items-center gap-2 text-slate-400 text-sm mb-2">
                                            <Calendar size={16} />
                                            <span>Total Apuestas</span>
                                        </div>
                                        <div className="text-3xl font-bold text-white mb-2">{stats.total}</div>
                                        <div className="text-xs text-slate-500">{stats.won}G / {stats.lost}P / {stats.pending}Pend</div>
                                    </div>
                                    <div className={`bg-slate-800 rounded-lg p-6 border ${stats.profit >= 0 ? 'border-green-500/30' : 'border-red-500/30'}`}>
                                        <div className="flex items-center gap-2 text-slate-400 text-sm mb-2">
                                            <DollarSign size={16} />
                                            <span>Ganancia Total</span>
                                        </div>
                                        <div className={`text-3xl font-bold mb-2 ${stats.profit >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                            {stats.profit >= 0 ? '+' : ''}{stats.profit.toFixed(2)}U
                                        </div>
                                        <div className="text-xs text-slate-500">Apostado: {stats.staked.toFixed(2)}U</div>
                                    </div>
                                    <div className="bg-slate-800 rounded-lg p-6 border border-slate-700">
                                        <div className="flex items-center gap-2 text-slate-400 text-sm mb-2">
                                            <Percent size={16} />
                                            <span>Win Rate</span>
                                        </div>
                                        <div className="text-3xl font-bold text-white mb-2">{stats.winRate.toFixed(1)}%</div>
                                        <div className="text-xs text-slate-500">{stats.total - stats.pending} resueltas</div>
                                    </div>
                                    <div className={`bg-slate-800 rounded-lg p-6 border ${stats.roi >= 0 ? 'border-green-500/30' : 'border-red-500/30'}`}>
                                        <div className="flex items-center gap-2 text-slate-400 text-sm mb-2">
                                            {stats.roi >= 0 ? <TrendingUp size={16} /> : <TrendingDown size={16} />}
                                            <span>ROI</span>
                                        </div>
                                        <div className={`text-3xl font-bold mb-2 ${stats.roi >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                            {stats.roi >= 0 ? '+' : ''}{stats.roi.toFixed(1)}%
                                        </div>
                                        <div className="text-xs text-slate-500">Retorno de inversión</div>
                                    </div>
                                </div>

                                <div className="bg-slate-800 rounded-lg p-6 border border-slate-700 mb-6">
                                    <h3 className="text-xl font-bold text-white mb-4">Rendimiento por Deporte</h3>
                                    <div className="space-y-4">
                                        {Object.entries(bets.reduce((acc, bet) => {
                                            if (!acc[bet.sport]) acc[bet.sport] = { total: 0, won: 0, profit: 0, staked: 0 };
                                            acc[bet.sport].total++;
                                            if (bet.result === 'Ganada') acc[bet.sport].won++;
                                            acc[bet.sport].profit += bet.profit;
                                            acc[bet.sport].staked += bet.stake;
                                            return acc;
                                        }, {})).map(([sport, data]) => {
                                            const wr = data.total > 0 ? (data.won / data.total) * 100 : 0;
                                            const roi = data.staked > 0 ? (data.profit / data.staked) * 100 : 0;
                                            return (
                                                <div key={sport} className="bg-slate-900 rounded-lg p-4">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <h4 className="text-lg font-semibold text-white">{sport}</h4>
                                                        <span className="text-sm text-slate-400">{data.total} apuestas</span>
                                                    </div>
                                                    <div className="grid grid-cols-3 gap-4 text-sm">
                                                        <div><span className="text-slate-400">Win Rate:</span><span className="ml-2 font-bold text-white">{wr.toFixed(1)}%</span></div>
                                                        <div><span className="text-slate-400">ROI:</span><span className={`ml-2 font-bold ${roi >= 0 ? 'text-green-400' : 'text-red-400'}`}>{roi >= 0 ? '+' : ''}{roi.toFixed(1)}%</span></div>
                                                        <div><span className="text-slate-400">Ganancia:</span><span className={`ml-2 font-bold ${data.profit >= 0 ? 'text-green-400' : 'text-red-400'}`}>{data.profit >= 0 ? '+' : ''}{data.profit.toFixed(2)}U</span></div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                        {bets.length === 0 && <div className="text-center text-slate-400 py-8">No hay datos</div>}
                                    </div>
                                </div>

                                <div className="bg-slate-800 rounded-lg p-6 border border-slate-700">
                                    <h3 className="text-xl font-bold text-white mb-4">Últimas 10 Apuestas</h3>
                                    <div className="flex gap-2">
                                        {[...bets].reverse().slice(0, 10).map(bet => (
                                            <div key={bet.id} className={`w-10 h-10 rounded flex items-center justify-center font-bold text-sm ${bet.result === 'Ganada' ? 'bg-green-500/20 text-green-400' : bet.result === 'Perdida' ? 'bg-red-500/20 text-red-400' : 'bg-yellow-500/20 text-yellow-400'}`} title={`${bet.event} - ${bet.result}`}>
                                                {bet.result === 'Ganada' ? 'G' : bet.result === 'Perdida' ? 'P' : '?'}
                                            </div>
                                        ))}
                                        {bets.length === 0 && <div className="text-slate-400 text-center w-full py-4">No hay apuestas</div>}
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<BettingTracker />, document.getElementById('root'));
    </script>
</body>
</html>
